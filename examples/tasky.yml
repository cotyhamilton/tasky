# yaml-language-server: $schema=../schema.json
steps:
  - name: clone
    image: alpine/git
    command: |
      set -eux
      repo=cotyhamilton/tasky
      git clone https://github.com/$repo
  - name: echo
    image: busybox
    command: |
      echo $NAME
    env:
      NAME: tasky
  - name: script
    command: |
      set -eux
      echo "hello from $NAME"
      pwd
      whoami
    type: script
    env:
      NAME: "tasky"
  - name: build step
    image: denoland/deno:alpine
    command: |
      deno run https://examples.deno.land/hello-world.ts
  - name: cleanup
    command: |
      docker stop $(docker ps -q) > /dev/null 2>&1
      docker rm $(docker ps -aq) > /dev/null 2>&1
      # docker rmi $(docker images -q) > /dev/null 2>&1
      exit 0
    type: script
